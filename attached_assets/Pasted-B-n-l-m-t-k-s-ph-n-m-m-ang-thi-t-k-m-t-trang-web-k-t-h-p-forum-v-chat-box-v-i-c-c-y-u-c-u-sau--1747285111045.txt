Bạn là một kỹ sư phần mềm đang thiết kế một trang web kết hợp forum và chat box với các yêu cầu sau:

**Box chat**
1. Hiển thị những đoạn chat từ 3 ngày gần nhất khi người dùng truy cập.
2. Người dùng có thể sử dụng lệnh `/ten [tên của bạn]` để tạo tên hoặc đăng nhập vào.
3. Người dùng có thể gửi tin nhắn dưới dạng văn bản (tối đa 1000 ký tự), hình ảnh, video, gif, emoji.
4. Nếu người dùng tạo tên qua lệnh, thông tin sẽ được lưu cache (cả server và client). Người dùng có thể đăng xuất thủ công hoặc tự động thoát sau 30 ngày nếu không tạo tài khoản.
5. Nếu người dùng chọn tự động tạo tài khoản, tài khoản và mật khẩu sẽ được tạo ngẫu nhiên và lưu trong trình duyệt.
6. Tin nhắn sẽ được lưu trữ tối đa 4 ngày. Tin nhắn cũ hơn sẽ bị xoá tự động.
7. Cho phép tag người dùng khác để trả lời họ trong đoạn chat.
8. Thông báo đẩy sẽ được kích hoạt khi có tin nhắn mới.

**Forum**
1. Người dùng có thể đăng topic với lựa chọn: ẩn danh hoặc công khai (mặc định).
2. Chỉ người dùng đã đăng ký hoặc đăng nhập mới được phép đăng topic.
3. Người dùng có thể bình luận vào topic với tên đã tạo từ box chat hoặc nhập tên mới (lưu trong cache tối đa 30 ngày).
4. Bình luận sẽ không bị tự động xoá như chatbox.
5. Topic hiển thị avatar, tên người đăng, thời gian đăng bài, tiêu đề, nội dung (bao gồm văn bản, hình ảnh, video, gif, emoji).

**Yêu cầu kỹ thuật**
- Sử dụng **WebSocket** để hỗ trợ tính năng realtime.
- Tối ưu hiệu suất lưu trữ và xử lý dữ liệu.

**Đề xuất bổ sung**
1. **Thêm tìm kiếm trong lịch sử chat**: Cho phép người dùng tìm kiếm tin nhắn theo từ khóa hoặc tên người gửi.
2. **Hiển thị trạng thái online/offline**: Cập nhật trạng thái realtime khi người dùng kết nối/ngắt kết nối.
3. **Hỗ trợ chat nhóm hoặc kênh riêng tư**: Người dùng có thể tạo phòng chat riêng hoặc tham gia kênh công khai.
4. **Phân loại topic trên forum**: Thêm danh mục (vd: Công nghệ, Giải trí) để người dùng dễ dàng tìm kiếm.
5. **Đánh giá và xếp hạng topic**: Người dùng có thể like/dislike topic, sắp xếp theo lượt vote hoặc lượt xem.
6. **Thông báo khi có bình luận mới trong forum**: Gửi thông báo cho người dùng khi có bình luận trong topic họ theo dõi.
7. **Chống spam và kiểm duyệt nội dung**: Áp dụng bộ lọc từ khóa và giới hạn số lượng tin nhắn hoặc bình luận liên tiếp.
8. **Tích hợp chế độ sáng/tối**: Người dùng có thể chuyển đổi giao diện sáng/tối.